var getArg = function(p){    return (match = window.location.search.match(new RegExp("[?|&]?" + p + "=([^&]*)"))) ? match[1] : false;}notifDuration = parseInt(localStorage.getItem('notificationsDuration'));if(notifDuration < 3)	notifDuration = 3;var timeoutID;	var closeNotif = function(){	if (timeoutID) {		clearTimeout(timeoutID);		timeoutID = null;	}	window.close();};var handleMouseOver = function () {	clearTimeout(timeoutID);	timeoutID = null;};var handleMouseOut = function () {	if (timeoutID) {		clearTimeout(timeoutID);		timeoutID = null;	};	timeoutID = setTimeout(closeNotif, notifDuration * 1000);};var playerControl = function(action) {	chrome.windows.getAll({populate : true},function(windows) {		for(var i = 0; i < windows.length; i++) {			var j = 0;			for(var dumb in windows[i].tabs) {				chrome.tabs.sendRequest(windows[i].tabs[j].id, {name: "controlPlayer", action: action}, function(response) { closeNotif(); return true; });				j++;			}		}	});}document.addEventListener("click", function() {	chrome.windows.getAll({populate : true},function(windows) {			var openedtab = false;			for(var i = 0; i < windows.length; i++) {				var j = 0;				for(var tab in windows[i].tabs) {					if(typeof windows[i].tabs[j] != "undefined" && typeof windows[i].tabs[j].url != "undefined") {						if(RegExp("^http(s)?://(www\.)?deezer\.com","gi").test(windows[i].tabs[j].url)) {							if(!openedtab) {								openedtab = windows[i].tabs[j].id;							} else {								chrome.tabs.remove(windows[i].tabs[j].id);							}						}						j++;					}				}			}			chrome.tabs.update(openedtab, {				selected: true			});		});});document.addEventListener("DOMContentLoaded", function() {		if(getArg('artist'))			document.getElementById('artist').innerHTML = decodeURIComponent(getArg('artist'));		if(getArg('song'))			document.getElementById('song').innerHTML = decodeURIComponent(getArg('song'));		if(getArg('coverurl'))			document.getElementById('albumCover').src = decodeURIComponent(getArg('coverurl'));		timeoutID = setTimeout(closeNotif, notifDuration * 1000);				document.getElementById('prev').addEventListener('click', function() {playerControl('prev');}, true);		document.getElementById('pause').addEventListener('click', function() {playerControl('pause');}, true);		document.getElementById('next').addEventListener('click', function() {playerControl('next');}, true);				document.getElementById('body').addEventListener('mouseover', function() {handleMouseOver();}, true);		document.getElementById('body').addEventListener('mouseout', function() {handleMouseOut();}, true);}, false);