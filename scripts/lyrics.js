var lyrics = {	lastArtist: null,	lastSong: null,	contents: 'Lancez la lecture pour afficher les paroles.',	init: function(source) {			},	pushInformations: function() {		if(this.lastArtist != songData.songInf.currentArtist		|| this.lastSong != songData.songInf.currentSong) {			lyrics.lastArtist = songData.songInf.currentArtist;			lyrics.lastSong = songData.songInf.currentSong;						lyrics.contents = "Recherche en cours";						var xhr = new XMLHttpRequest(); 			  xhr.onreadystatechange = function() { 				 if(xhr.readyState == 4) {					if(xhr.status == 200) { 						 var idlyr = xhr.responseText.split("\n");						 idlyr = idlyr[0].split("\\");						 idlyr = idlyr[0];						 						 if(xhr.responseText.length < 2) {							lyrics.contents = "Paroles introuvables pour cette chanson.";						 } else {						 							 var xhr2 = new XMLHttpRequest(); 							  xhr2.onreadystatechange = function() { 								 if(xhr2.readyState == 4) {									if(xhr2.status == 200) { 										 lyrics.contents = nl2br(xhr2.responseText,true);										}						 									}								};														xhr2.open("GET", 'http://webservices.lyrdb.com/getlyr.php?q=' + idlyr , true);							xhr2.send(); 						}					}						 				}			};						xhr.open("GET", 'http://webservices.lyrdb.com/lookup.php?q=' + encodeURIComponent(songData.songInf.currentArtist) + '|' + encodeURIComponent(songData.songInf.currentSong) + '&for=match&agent=DeezerPlus' , true);			xhr.send(); 		};	},	refreshPopUp: function() {		chrome.extension.sendRequest({name: "getInfos", resource:"lyrics"}, function(response) {			if(lyrics.lastArtist != response.currentArtist			|| lyrics.lastSong != response.currentSong) {				lyrics.lastArtist = response.currentArtist;				lyrics.lastSong = response.currentSong;				document.getElementById('lyrics').innerHTML = response.content;			}						if(document.getElementById('lyrics').innerHTML == "Recherche en cours")				lyrics.lastSong = null;		});			},	unload: function() {		lastArtist = null;		lastSong = null;		contents = 'Lancez la lecture pour afficher les paroles.';	}}