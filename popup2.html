<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	<title>Popup Deezer+</title>
	<link href="res/popup.css" rel="stylesheet" type="text/css"/>
	<script src="scripts/popup.js"></script>
	<script src="scripts/wikipedia.js"></script>
	<script src="scripts/lyrics.js"></script>
	<script src="scripts/deezerapi.js"></script>
	<script src="scripts/php.js"></script>
	<style type="text/css">
	body {
		width: 340px;
		min-height:540px;
		max-height:620px;
	}
	</style>
</head>
<body>
	<div id="nowplaying">
		<span class="controls">
			<img src="res/popup/media-seek-backward.png" alt="Prev" onclick="popup.deezerControl('prev');" id="controlPrev"/>
			<img src="res/popup/media-playback-start.png" alt="Play" onclick="popup.deezerControl('play');" id="controlPlay"/>
			<img src="res/popup/media-playback-pause.png" alt="Pause" onclick="popup.deezerControl('pause');" id="controlPause"/>
			<img src="res/popup/media-seek-forward.png" alt="Next" onclick="popup.deezerControl('next');" id="controlNext"/>
		</span>
		<span id="artist"></span>
		<span id="song"></span>
	</div>
	<ul id="popup_nav">
		<li class="selected" id="artist_infosLink" onclick="popup.switchView('artist_infos');">Artiste</li>
		<li id="album_infosLink" onclick="popup.switchView('album_infos');">Album</li>
		<li id="track_infosLink" onclick="popup.switchView('track_infos');">Piste</li>
		<li id="siteLink" onclick="popup.switchView('site');">Site</li>
		<li class="popup_nav_right"><a href="options.html" target="_blank"><img src="res/popup/package_settings.png" alt="Paramètres"/></a></li>
	</ul>
	<div id="multipleview">
		<div id="artist_infos">
			<ul id="artist_infos_nav" class="popup_nav_second">
				<li class="selected" id="wikipediaLink" onclick="popup.switchSecondView('artist_infos','wikipedia');">Wikipédia</li>
				<li id="discoLink" onclick="popup.switchSecondView('artist_infos','disco');">Discographie</li>
				<li id="relatedLink" onclick="popup.switchSecondView('artist_infos','related');">Similaires</li>
			</ul>
			<div id="wikipedia">
				Wikipédia ne peut être chargée car aucun onglet avec <a href="http://www.deezer.com/" target="_blank">Deezer</a> n'est ouvert.
			</div>
			<div id="disco" style="display:none;">
				La discographie ne peut être chargée car aucun onglet avec <a href="http://www.deezer.com/" target="_blank">Deezer</a> n'est ouvert.
			</div>
			<div id="disco-focus" style="display:none;">
				La discographie ne peut être chargée car aucun onglet avec <a href="http://www.deezer.com/" target="_blank">Deezer</a> n'est ouvert.
			</div>
			<div id="disco-foreign" style="display:none;">
				La discographie ne peut être chargée car aucun onglet avec <a href="http://www.deezer.com/" target="_blank">Deezer</a> n'est ouvert.
			</div>
			<div id="related" style="display:none;">
				Les artistes similaires ne peuvent être chargés car aucun onglet avec <a href="http://www.deezer.com/" target="_blank">Deezer</a> n'est ouvert.
			</div>
		</div>
		<div id="album_infos">
			<ul id="album_infos_nav" class="popup_nav_second">
				<li class="selected" id="albumcontentsLink" onclick="popup.switchSecondView('album_infos','albumcontents');">Contenu</li>
				<!--li id="buy_albumLink" onclick="popup.switchSecondView('album_infos','buy_album');">Acheter</li-->
			</ul>
			<div id="albumcontents">
				Les paroles ne peuvent être chargées car aucun onglet avec <a href="http://www.deezer.com/" target="_blank">Deezer</a> n'est ouvert.
			</div>
			<div id="buy_album" style="display:none;">
				Les liens vers les boutiques en ligne ne peuvent être affichés car j'ai eu la flemme de les implémenter pour le moment.
			</div>
		</div>
		<div id="track_infos">
			<ul id="track_infos_nav" class="popup_nav_second">
				<li class="selected" id="lyricsLink" onclick="popup.switchSecondView('track_infos','lyrics');">Paroles</li>
				<!--li id="buy_trackLink" onclick="popup.switchSecondView('track_infos','buy_track');">Acheter</li-->
			</ul>
			<div id="lyrics">
				Les paroles ne peuvent être chargées car aucun onglet avec <a href="http://www.deezer.com/" target="_blank">Deezer</a> n'est ouvert.
			</div>
			<div id="buy_track" style="display:none;">
				Les liens vers les boutiques en ligne ne peuvent être affichés car j'ai eu la flemme de les implémenter pour le moment.
			</div>
		</div>
		<div id="site">
			<ul id="site_nav" class="popup_nav_second">
				<li class="selected" id="site_accountLink" onclick="popup.switchSecondView('site','site_account');">Liens</li>
				<!--li id="site_searchLink" onclick="popup.switchSecondView('site','site_search');">Recherche</li-->
				<li class="popup_nav_right"><a href="http://www.deezer.com/" target="_blank"><img src="res/popup/open_player.png" alt="Ouvrir un nouveau lecteur"/></a></li>
			</ul>
			<div id="site_search" style="display:none;">
				<input type="search" name=""/>
				<input type="submit" value="rechercher" />
				<div id="searchresults"> 
				</div>
			</div>
			<div id="site_account">
				<ul class="deezerLinks">
					<li onclick="popup.deezerControl('subscription');"><img src="res/popup/stock_calendar-view-month.png" alt="" /></li>
					<li onclick="popup.deezerControl('login');"><img src="res/popup/pidgin-tray-available.png" alt="" /></li>
					<li onclick="popup.deezerControl('logout');"><img src="res/popup/pidgin-tray-busy.png" alt="" /></li>
					<li onclick="popup.deezerControl('register');"><img src="res/popup/list-add.png" alt="" /></li>
					<li onclick="popup.deezerControl('friends');"><img src="res/popup/applications-chat-panel.png" alt="" /></li>
					<li onclick="popup.deezerControl('inbox');"><img src="res/popup/internet-group-chat.png" alt="" /></li>
					<li onclick="popup.deezerControl('home');"><img src="res/popup/gtk-home.png" alt="" /></li>
				</ul>
			</div>

			<div id="site_more" style="display:none;">
			</div>
		</div>
	</div>
	<script>
		
		window.addEventListener('load', function() {
			wikipedia.init('popup');
			popup.refreshPopUp();
			popup.switchView('artist_infos')
		}, false);
		
		chrome.extension.onRequest.addListener(function(request, sender, sendResponse)
			{
			switch (request.name) {
					case "updatePopup":
						popup.refreshPopUp();
						sendResponse(true);
					break;
					case "clearPopup":
						popup.unload();
					break;
				}
			});
	</script>
</body>