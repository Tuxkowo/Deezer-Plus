<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	<title>Popup Deezer+</title>
	<link href="res/popup.css" rel="stylesheet" type="text/css"/>
	<script src="scripts/popup.js"></script>
	<script src="scripts/wikipedia.js"></script>
	<script src="scripts/lyrics.js"></script>
	<style type="text/css">
	body {
		width: 340px;
		min-height:540px;
		max-height:620px;
	}
	</style>
</head>
<body>
	<div id="nowplaying">
		<span class="controls">
			<img src="res/popup/media-seek-backward.png" alt="Prev" onclick="popup.deezerControl('prev');" id="controlPrev"/>
			<img src="res/popup/media-playback-start.png" alt="Play" onclick="popup.deezerControl('play');" id="controlPlay"/>
			<img src="res/popup/media-playback-pause.png" alt="Pause" onclick="popup.deezerControl('pause');" id="controlPause"/>
			<img src="res/popup/media-seek-forward.png" alt="Next" onclick="popup.deezerControl('next');" id="controlNext"/>
		</span>
		<span id="artist"></span>
		<span id="song"></span>
	</div>
	<ul class="popup_nav">
		<li class="popup_nav_item" id="wikiLink" onclick="popup.switchView('wikipedia');">Wikipédia</li>
		<li class="popup_nav_item" id="lyricsLink" onclick="popup.switchView('lyrics');">Paroles</li>
		<li class="popup_nav_item" id="linksLink" onclick="popup.switchView('links');">Deezer</li>
		<li class="popup_nav_item popup_nav_right"><a href="options.html" target="_blank"><img src="res/popup/package_settings.png" alt="Paramètres"/></a></li>
	</ul>
	<div id="multipleview">
		<div id="wikipedia">
			Wikipédia ne peut être chargée car aucun onglet avec <a href="http://www.deezer.com/" target="_blank">Deezer</a> n'est ouvert.
		</div>
		<div id="lyrics">
			Les paroles ne peuvent être chargées car aucun onglet avec <a href="http://www.deezer.com/" target="_blank">Deezer</a> n'est ouvert.
		</div>
		<div id="links">
			<a href="http://www.deezer.com/" target="_blank">Ouvrir un nouveau lecteur Deezer</a>
			<p><em>Ces liens sont utiles si vous avez desactivé des éléments de l'interface de Deezer. Un onglet avec Deezer chargé est nécessaire pour les ouvrir.</em></p>
			<h2>Deezer</h2>
			<ul class="deezerLinks">
				<li onclick="popup.deezerControl('home');"><img src="res/popup/gtk-home.png" alt="" /></li>
				<li onclick="popup.deezerControl('friends');"><img src="res/popup/applications-chat-panel.png" alt="" /></li>
				<li onclick="popup.deezerControl('inbox');"><img src="res/popup/internet-group-chat.png" alt="" /></li>
			</ul>
			<h2>Connexion/Déconnexion</h2>
			<ul class="deezerLinks">
				<li onclick="popup.deezerControl('login');"><img src="res/popup/pidgin-tray-available.png" alt="" /></li>
				<li onclick="popup.deezerControl('logout');"><img src="res/popup/pidgin-tray-busy.png" alt="" /></li>
				<li onclick="popup.deezerControl('register');"><img src="res/popup/list-add.png" alt="" /></li>
			</ul>
			<h2>Gestion du compte</h2>
			<ul class="deezerLinks">
				<li onclick="popup.deezerControl('subscription');"><img src="res/popup/stock_calendar-view-month.png" alt="" /></li>
			</ul>
			
		</div>
	</div>
	<script>
		wikipedia.init('popup');
		window.setTimeout("wikipedia.refreshPopUp();lyrics.refreshPopUp();popup.refreshPopUp();", 100);
		window.addEventListener('load', popup.switchView('wikipedia'), false);
		
		chrome.extension.onRequest.addListener(function(request, sender, sendResponse)
			{
			switch (request.name) {
					case "updatePopup":
						popup.refreshPopUp();
						wikipedia.refreshPopUp();
						lyrics.refreshPopUp();
						sendResponse(true);
					break;
					case "clearPopup":
						popup.unload();
					break;
				}
			});
	</script>
</body>